{% if pagination.totalPages > 1 %}
    {% set routeParams = app.request.attributes.get('_route_params')|merge(app.request.query.all)|merge({_locale: app.request.locale}) %}

    <div class="flex flex-col sm:flex-row justify-between items-center gap-4 mt-8">
        <span class="text-sm text-gray-600">
            Affichage {{ pagination.start }}-{{ pagination.end }} de {{ pagination.total }} article(s)
        </span>

        <nav class="flex items-center gap-1">
            {% if pagination.hasPrev %}
                <a href="{{ path(app.request.attributes.get('_route'), routeParams|merge({page: pagination.page - 1})) }}"
                   class="px-3 py-2 border border-gray-300 rounded hover:bg-gray-100">
                    &laquo;
                </a>
            {% else %}
                <span class="px-3 py-2 border border-gray-200 rounded text-gray-400">&laquo;</span>
            {% endif %}

            {% set startPage = max(1, pagination.page - 2) %}
            {% set endPage = min(pagination.totalPages, pagination.page + 2) %}

            {% if startPage > 1 %}
                <a href="{{ path(app.request.attributes.get('_route'), routeParams|merge({page: 1})) }}"
                   class="px-3 py-2 border border-gray-300 rounded hover:bg-gray-100">1</a>
                {% if startPage > 2 %}
                    <span class="px-2">...</span>
                {% endif %}
            {% endif %}

            {% for p in startPage..endPage %}
                {% if p == pagination.page %}
                    <span class="px-3 py-2 bg-gray-900 text-white rounded">{{ p }}</span>
                {% else %}
                    <a href="{{ path(app.request.attributes.get('_route'), routeParams|merge({page: p})) }}"
                       class="px-3 py-2 border border-gray-300 rounded hover:bg-gray-100">{{ p }}</a>
                {% endif %}
            {% endfor %}

            {% if endPage < pagination.totalPages %}
                {% if endPage < pagination.totalPages - 1 %}
                    <span class="px-2">...</span>
                {% endif %}
                <a href="{{ path(app.request.attributes.get('_route'), routeParams|merge({page: pagination.totalPages})) }}"
                   class="px-3 py-2 border border-gray-300 rounded hover:bg-gray-100">{{ pagination.totalPages }}</a>
            {% endif %}

            {% if pagination.hasNext %}
                <a href="{{ path(app.request.attributes.get('_route'), routeParams|merge({page: pagination.page + 1})) }}"
                   class="px-3 py-2 border border-gray-300 rounded hover:bg-gray-100">
                    &raquo;
                </a>
            {% else %}
                <span class="px-3 py-2 border border-gray-200 rounded text-gray-400">&raquo;</span>
            {% endif %}
        </nav>
    </div>
{% endif %}
