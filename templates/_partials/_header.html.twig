<header class="bg-primary text-paragraph z-45">
    <div class="flex flex-wrap items-center justify-between gap-4 p-4">
        <!-- Logo -->
        <a href="{{ path('homepage') }}" class="flex items-center gap-2 font-semibold">
            <img src="{{ asset('carton-40x40.webp') }}" class="size-8" alt="Logo">
            <span class="font-title hidden sm:inline text-lg lg:text-xl">HardWareHouse</span>
        </a>

        <!-- Actions -->
        <div class="flex items-center gap-2 md:gap-4 md:shrink-0 md:order-3">
            <!-- Burger Menu Button - Mobile Only -->
            <button
                type="button"
                class="md:hidden p-2 rounded-md hover:bg-primary-dark transition-colors"
                data-controller="burger"
                data-action="click->burger#toggle"
                data-burger-target-value="#mobile-menu"
                aria-label="Menu"
            >
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>

            {% include '_partials/_dropdown_user.html.twig' %}
            {% include '_partials/_dropdown_cart.html.twig' %}
            {% include '_partials/_dropdown_locale.html.twig' %}
        </div>

        <!-- Search -->
        <div class="w-full md:w-auto md:flex-1 md:flex md:justify-center md:max-w-2xl md:mx-4 order-1 md:order-2"
             data-controller="search" data-search-url-value="{{ path('search') }}">
            <div class="relative w-full">
                {{ ux_icon('heroicons-solid:magnifying-glass', {class: 'absolute left-3 top-1/2 -translate-y-1/2 size-4 text-secondary'}) }}
                <input
                    type="search"
                    placeholder="Cherche un produit, une marque…"
                    class="w-full rounded-md bg-search pl-10 pr-3 py-2.5 text-sm font-display font-medium"
                    data-search-target="input"
                    data-action="input->search#query"
                >
                <div class="absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-md shadow-lg hidden z-50" data-search-target="results">
                    <!-- Résultats de recherche -->
                </div>
            </div>
        </div>
    </div>

    <!-- Categories Navigation -->
    <nav class="bg-secondary relative">
        <!-- Mobile Menu - Fullscreen Overlay -->
        <div
            id="mobile-menu"
            class="md:hidden fixed inset-0 bg-secondary z-50 hidden overflow-y-auto transition-opacity duration-200 ease-out"
            data-burger-target="toggleable"
        >
            <!-- Close button -->
            <div class="flex justify-end p-4">
                <button
                    type="button"
                    class="p-2 rounded-md hover:bg-secondary-dark transition-colors"
                    data-controller="burger"
                    data-action="click->burger#toggle"
                    data-burger-target-value="#mobile-menu"
                    aria-label="Fermer le menu"
                >
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Menu items -->
            <ul class="flex flex-col px-6 pb-6 space-y-4">
                <li>
                    <a href="{{ path('brand.index') }}" class="block py-3 px-4 text-lg rounded-lg hover:bg-secondary-dark transition-colors">
                        {{ 'category.marques'|trans }}
                    </a>
                </li>
                {% for category in categories() %}
                    <li>
                        <a href="{{ path('category.show', {slug: category.slug}) }}" class="block py-3 px-4 text-lg rounded-lg hover:bg-secondary-dark transition-colors">
                            {{ ('category.' ~ category.slug)|trans }}
                        </a>
                    </li>
                {% endfor %}
            </ul>
        </div>

        <!-- Desktop Menu -->
        <div class="hidden md:block">
            <ul class="flex gap-4 items-center overflow-x-auto px-4 py-2 text-sm justify-center font-display font-bold">
                <li>
                    <a href="{{ path('brand.index') }}" class="hover:text-white transition-colors">
                        {{ 'category.marques'|trans }}
                    </a>
                </li>
                {% for category in categories() %}
                    <li>
                        <a href="{{ path('category.show', {slug: category.slug}) }}" class="hover:text-white transition-colors">
                            {{ ('category.' ~ category.slug)|trans }}
                        </a>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </nav>
</header>
